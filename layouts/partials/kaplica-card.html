{{/*
  Kaplıca Kartı Partial
  Kullanım: {{ partial "kaplica-card.html" . }}
  Parametre olarak kaplıca page objesi beklenir.
*/}}

{{ $temp := .Params.temperature }}
{{ $tempClass := "cool" }}
{{ if $temp }}{{ if ge $temp 50 }}{{ $tempClass = "hot" }}{{ else if ge $temp 35 }}{{ $tempClass = "warm" }}{{ end }}{{ end }}

{{/* Açıklama: Description > Summary (plainify) */}}
{{ $desc := .Description | default (.Summary | plainify | truncate 120) }}

<article class="kaplica-card">
  <a href="{{ .RelPermalink }}" class="kaplica-card__image-wrap" tabindex="-1" aria-hidden="true">
    {{ with .Params.image }}
    <img
      class="kaplica-card__img"
      src="{{ . }}"
      alt="{{ $.Title }} fotoğrafı"
      loading="lazy"
      width="400"
      height="250"
    >
    {{ else }}
    <div class="kaplica-card__placeholder" aria-hidden="true">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="48" height="48" fill="none">
        <circle cx="32" cy="32" r="30" stroke="rgba(255,255,255,0.25)" stroke-width="1.5"/>
        <path d="M32 14 C32 14 20 28 20 37 C20 44.2 25.4 50 32 50 C38.6 50 44 44.2 44 37 C44 28 32 14 32 14Z"
              fill="rgba(255,255,255,0.22)" stroke="rgba(255,255,255,0.45)" stroke-width="1.5"/>
        <path d="M26 37 Q30 34 34 37 Q38 40 42 37" fill="none" stroke="rgba(255,255,255,0.35)" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      {{ if .Params.province }}
      <span>{{ .Params.province }}</span>
      {{ else }}
      <span>Termal Kaynak</span>
      {{ end }}
    </div>
    {{ end }}

    {{ with .Params.temperature }}
    <span class="kaplica-card__badge kaplica-card__badge--{{ $tempClass }}">{{ . }}°C</span>
    {{ end }}
  </a>

  <div class="kaplica-card__body">
    {{ if or .Params.district .Params.province }}
    <p class="kaplica-card__location">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
        <circle cx="12" cy="10" r="3"/>
      </svg>
      {{ with .Params.district }}{{ . }}, {{ end }}{{ .Params.province }}
    </p>
    {{ end }}

    <h3 class="kaplica-card__title">
      <a href="{{ .RelPermalink }}">{{ .Title }}</a>
    </h3>

    {{ if $desc }}
    <p class="kaplica-card__desc">{{ $desc | truncate 115 }}</p>
    {{ end }}

    <div class="kaplica-card__footer">
      <span class="kaplica-card__temp {{ if $temp }}kaplica-card__temp--active{{ end }}">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M14 14.76V3.5a2.5 2.5 0 00-5 0v11.26a4.5 4.5 0 105 0z"/>
        </svg>
        {{ with .Params.temperature }}{{ . }}°C{{ else }}Termal{{ end }}
      </span>
      <a href="{{ .RelPermalink }}" class="kaplica-card__link" aria-label="{{ .Title }} detaylarını gör">
        Detayları Gör →
      </a>
    </div>
  </div>
</article>
